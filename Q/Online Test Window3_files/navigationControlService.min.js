define2(["services/testWindowConstants"],function(){angular.module("mettl").register.service("NavigationControlService",["$q","$log","TestWindowConstants",function(g,f,l){function h(b){for(var a in e)if(e[a]===b)return!0;return!1}var e=l.NavigationAway,c={};this.addHandler=function(b,a){var d;b&&"function"===typeof b?h(a)?c[a]&&c[a].constructor===[].constructor||(c[a]=[]):d="Invalid mode found for adding navigation handler. Mode:"+a:d="Improper handler found";d?f.error(d):c[a].push(b)};this.isNavigationAllowed=
function(b){var a;try{if(h(b))c[b]&&c[b].constructor===[].constructor?a=c[b]:(f.log("No handler found for mode: ",b),a=[]);else throw Error("Invalid mode for checking navigation permission. Mode: "+b);}catch(d){return f.error("Error in findling handlers for navigation check. Error: ",d),a=g.defer(),a.reject("Navigation not allowed for mode: "+b),a.promise()}b=[];for(var e=a.length,k=0;k<e;k++)b.push(a.pop()());return g.all(b)};this.clearNavigationHandlers=function(b){for(var a=0;a<b.length;a++)c[b[a]]=
[]}}])});