define2([],function(){function g(){this._defaults={};var a=(new Date).getTime()-1E3;this._updateTimers(this,a)}var e=jQuery;e.extend(g.prototype,{_timer:0,_targets:[],_markerClassName:"hasTickTock",_addTarget:function(a){this._hasTarget(a)||this._targets.push(a)},_hasTarget:function(a){return-1<e.inArray(a,this._targets)},_init:function(a,b){if(b){var c=e(a);if(!c.hasClass(this._markerClassName)){c.addClass("stopwatch");c.addClass(this._markerClassName);var d=parseInt(b.time/3600,10),f=parseInt((b.time-
3600*d)/60,10),k=parseInt(b.time-3600*d-60*f,10),h;h=24<=d?Math.round(d/24):0;b.showSecondValueOnly?c.html("\x3cdiv class\x3d'daysAnnotation inline hidden'\x3e\x3cspan class\x3d'dd'\x3e0\x3c/span\x3e\x3cspan\x3e Days Left\x3c/span\x3e\x3c/div\x3e \x3cdiv class\x3d'hoursAnnotation inline'\x3e\x3cspan class\x3d'hr hidden'\x3e0\x3c/span\x3e\x3cspan class\x3d'min hidden'\x3e0\x3c/span\x3e\x3cspan class\x3d'sec'\x3e0\x3c/span\x3e\x3c/div\x3e"):1<=h?c.html("\x3cdiv class\x3d'daysAnnotation inline'\x3e\x3cspan class\x3d'dd'\x3e0\x3c/span\x3e\x3cspan\x3e Days Left\x3c/span\x3e\x3c/div\x3e \x3cdiv class\x3d'hidden hoursAnnotation inline'\x3e\x3cspan class\x3d'hr'\x3e0\x3c/span\x3e:\x3cspan class\x3d'min'\x3e0\x3c/span\x3e:\x3cspan class\x3d'sec'\x3e0\x3c/span\x3e\x3c/div\x3e"):
c.html("\x3cdiv class\x3d'hidden daysAnnotation inline'\x3e\x3cspan class\x3d'dd'\x3e0\x3c/span\x3e Days Left\x3c/div\x3e \x3cdiv class\x3d'hoursAnnotation inline'\x3e\x3cspan class\x3d'hr'\x3e0\x3c/span\x3e:\x3cspan class\x3d'min'\x3e0\x3c/span\x3e:\x3cspan class\x3d'sec'\x3e0\x3c/span\x3e\x3c/div\x3e");var l=c.find(".daysAnnotation"),g=c.find(".hoursAnnotation"),m=c.find(".dd"),n=c.find(".hr"),p=c.find(".min"),c=c.find(".sec"),d={isOn:b.startNow,$dDiv:l,$hDiv:g,$day:m,$hr:n,$min:p,$sec:c,days:h,
hour:d,min:f,sec:k,timer:0,seconds_left:b.time,onExpiry:b.onExpiry,promptTime:b.promptTime||-1,onPromptTime:b.onPromptTime,isPrompted:!1,showSecOnly:b.showSecondValueOnly};e.data(a,"TICK_TOCK",d);this._addTarget(a);d.$day.html(10<=d.days?d.days:"0"+d.days);d.$hr.html(10<=d.hour?d.hour:"0"+d.hour);d.$min.html(10<=d.min?d.min:"0"+d.min);d.$sec.html(10<=d.sec||b.showSecondValueOnly?d.sec:"0"+d.sec)}}},_removeTarget:function(a){this._targets=e.grep(this._targets,function(b){return b!=a})},_showValues:function(a){if(a){if(1>
a.days){var b=a.$hDiv;b.hasClass("hidden")&&(b.removeClass("hidden"),a.$dDiv.addClass("hidden"))}a.$day.html(10<=a.days?a.days:"0"+a.days);a.$hr.html(10<=a.hour?a.hour:"0"+a.hour);a.$min.html(10<=a.min?a.min:"0"+a.min);a.$sec.html(10<=a.sec||a.showSecOnly?a.sec:"0"+a.sec)}},_updateTimers:function(a,b){function c(){if(a._targets&&0!=a._targets.length)try{for(var b=a._targets.length-1;0<=b;b--){var c=a._targets[b],d=e.data(c,"TICK_TOCK");d&&d.isOn&&a._calculateTime({target:c,sender:a})}}catch(f){}}
c();var d=(new Date).getTime(),f=function(a){a-=b+1E3;if(0>a)return 1E3;a=1E3-a;if(0>a)if(-5E4<a)for(;0>a;)c(),a+=1E3;else a=1E3;return a}(d);a._timer=setTimeout(function(){a._updateTimers(a,d);a=null},f)},_calculateTime:function(a){var b=e.data(a.target,"TICK_TOCK");if(b){if(0==b.seconds_left){a.sender.pause(a.target);a.sender._removeTarget(a.target);if(b.onExpiry)b.onExpiry();throw Error("time up, resetting all");}b.isOn&&(0<b.sec?b.sec--:(b.sec=59,0<b.min?b.min--:(b.min=59,0<b.hour&&b.hour--,b.days=
24<=b.hour?Math.round(b.hour/24):0)),b.seconds_left--,this._showValues(b),!b.isPrompted&&b.seconds_left<=b.promptTime&&e.isFunction(b.onPromptTime)&&(b.onPromptTime(),b.isPrompted=!0),e.data(a.sender,"TICK_TOCK",b))}},change:function(a,b){var c=e.data(a,"TICK_TOCK");if(b&&b.time){this.pause(a);c.time=c.seconds_left=b.time;var d=parseInt(b.time/3600,10),f=parseInt((b.time-3600*d)/60,10),g=parseInt(b.time-3600*d-60*f,10),h;h=24<=d?Math.round(d/24):0;c.hour=d;c.min=f;c.sec=g;c.days=h;c.isOn=!0;this._showValues(c);
e.data(a,"TICK_TOCK",c)}},destroy:function(a){var b=e(a),c=e.data(a,"TICK_TOCK");b.hasClass(this._markerClassName)&&c&&(b.removeClass(this._markerClassName),this._removeTarget(a),c.hour=c.min=c.sec=0,this._showValues(c),e.removeData(a,"TICK_TOCK"))},pause:function(a){var b=e.data(a,"TICK_TOCK");b&&(b.isOn=!1,e.data(a,"TICK_TOCK",b))},resume:function(a){var b=e.data(a,"TICK_TOCK");b&&(b.isOn=!0,e.data(a,"TICK_TOCK",b))},start:function(a){var b=e.data(a,"TICK_TOCK");b&&(b.isOn=!0,e.data(a,"TICK_TOCK",
b))},getTime:function(a){if(a=e.data(a,"TICK_TOCK"))return 3600*a.hour+60*a.min+a.sec},pauseAll:function(){},resumeAll:function(){}});jQuery.fn.tickTock=function(a){var b=Array.prototype.slice.call(arguments,1);return"getTime"==a?e.tickTock[a].apply(e.tickTock,[this[0]].concat(b)):this.each(function(){"string"==typeof a?e.tickTock[a].apply(e.tickTock,[this].concat(b)):e.tickTock._init(this,a)})};e.tickTock=new g});