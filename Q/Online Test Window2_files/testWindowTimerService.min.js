define2([],function(){angular.module("mettl").register.service("TestWindowTimerService",["$log","$rootScope","TestWindowTestStateService","TestWindowConstants",function(n,l,e,m){var g=new function(){var c=!0,d=null,b=null,f=!1;l.$on(m.Events.Question.QuestionImagesLoading,function(){f=!0;g.Stop()});l.$on(m.Events.Question.QuestionImagesLoaded,function(){f=!1;g.Start()});return{Start:function(){c||e.sectionState.instruction.isOn()||e.sectionState.sectionChangeTransition.isInCurrent()||e.onAnyRetry()||
f||e.testState.isTestProctorPaused||(d&&d.tickTock("resume"),b&&b.tickTock("resume"),c=!0)},Initialize:function(a){if(cn.neyzoter.test){var h=!1;c=e.onAnyRetry()||!a.startNow||e.testState.isTestProctorPaused?!1:h=!0;d=$("._testTime").tickTock({time:a.time,onExpiry:a.onExpiry,startNow:h,promptTime:300<a.time?299:59,onPromptTime:a.onPromptTime});d.removeAttr("id")}if(a.section){var h=0==$(b).length?$("._sectionTime"):$(b),f=a.section.Duration-a.section.TimeTaken,g=this.GetTestTime(),k=f;g<f&&(k=g);0>=k&&(k=1);
b=h.tickTock({time:k,startNow:!!a.startNow,onExpiry:function(){a.onExpiry(a.section.Index)}});c||b.tickTock("pause");b.removeAttr("id")}},Stop:function(){c&&(d&&d.tickTock("pause"),b&&b.tickTock("pause"),c=!1)},GetTestTime:function(){return d?d.tickTock("getTime"):null},GetSectionTime:function(){return b?b.tickTock("getTime"):null},SetStatusOn:function(){c=!0},SetStatusOff:function(){c=!1},UpdateTime:function(a){cn.neyzoter.test&&a.time&&d&&d.tickTock("change",{time:a.time})},Kill:function(a){a.section&&b&&
b.tickTock("destroy")},GetStatus:function(){return c}}};return g}])});